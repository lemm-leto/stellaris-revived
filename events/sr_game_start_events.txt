namespace = sr_game_start

# Change starting colony type based on trait selected
country_event = {
  id = sr_game_start.1000
  hide_window = yes
  is_triggered_only = yes

  trigger = {
    NAND = {
      is_primitive = yes
      is_country_type = fallen_empire
    }
  }

  immediate = {
    if = {
      limit = {
        exists = capital_scope
        NOR = {
          owner = { has_origin = origin_life_seeded }
          owner = { has_origin = origin_post_apocalyptic }
          owner = { has_origin = origin_remnants }
          owner = { has_origin = origin_shattered_ring }
          owner = { has_origin = origin_void_dwellers }
        }
      }
      capital_scope = {
        if = { limit = { owner_species = { has_trait = trait_primatoid } } change_pc = pc_continental }
        else_if = { limit = { owner_species = { has_trait = trait_oceanid } } change_pc = pc_ocean }
        else_if = { limit = { owner_species = { has_trait = trait_reptiloid } } change_pc = pc_desert }
        else_if = { limit = { owner_species = { has_trait = trait_avian } } change_pc = pc_tropical }
        else_if = { limit = { owner_species = { has_trait = trait_insectoid } } change_pc = pc_desert }
        else_if = { limit = { owner_species = { has_trait = trait_plasmoid } } change_pc = pc_plasma }
        else_if = { limit = { owner_species = { has_trait = trait_necrophage } } change_pc = pc_continental } # ToDo change

        if = {
          limit = {
            NOT = { owner_species = { has_trait = trait_plasmoid } }
          }
          remove_all_buildings = yes

          generate_start_deposits_and_blockers = yes
          generate_start_buildings_and_districts = yes
        }
        else = {
          generate_start_plasma_ditricts = yes
        }

        if = {
          limit = { owner = { has_origin = origin_mechanists } }
          add_building = building_robot_assembly_plant
          add_district_and_planet_size_if_needed_effect = {
            district = district_generator
          }
        }

        if = {
          limit = {
            owner = {
              has_origin = origin_necrophage
              NOT = { has_civic = civic_fanatic_purifiers }
            }
          }
          add_building = building_necrophage_elevation_chamber
        }
      }
    }
  }
}